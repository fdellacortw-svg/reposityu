<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Illusion Hub Deobfuscator</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&family=Roboto+Mono&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background-color: #000;
      min-height: 100vh;
      font-family: 'Poppins', sans-serif;
      overflow-x: hidden;
    }

    /* Loading Screen */
    .loading-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #000;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      transition: opacity 0.5s ease, visibility 0.5s ease;
    }

    .loading-screen.hidden {
      opacity: 0;
      visibility: hidden;
    }

    .progress-loader {
      width: 150px;
      background: rgba(236, 236, 238, 0.253);
      height: 10px;
      border-radius: 7px;
      overflow: hidden;
    }

    .progress {
      width: 1px;
      height: 10px;
      border-radius: 7px;
      background: rgb(255, 255, 255);
      transition: 0.5s;
      animation: loading_44 2s cubic-bezier(0.4, 1.01, 1, 1) forwards;
    }

    @keyframes loading_44 {
      0% { width: 0%; }
      100% { width: 100%; }
    }

    /* Login Form */
    .login-container {
      display: none;
      min-height: 100vh;
      align-items: center;
      justify-content: center;
      padding: 20px;
    }

    .login-container.visible {
      display: flex;
    }

    .form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      padding: 2em;
      background-color: #171717;
      border-radius: 25px;
      transition: .4s ease-in-out;
      width: 100%;
      max-width: 320px;
    }

    @media (min-width: 768px) {
      .form:hover {
        transform: scale(1.05);
        border: 1px solid black;
      }
    }

    #heading {
      text-align: center;
      margin: 1em 0 1.5em;
      color: rgb(255, 255, 255);
      font-size: 1.1em;
    }

    .field {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5em;
      border-radius: 25px;
      padding: 0.6em;
      border: none;
      outline: none;
      color: white;
      background-color: #171717;
      box-shadow: inset 2px 5px 10px rgb(5, 5, 5);
    }

    .input-icon {
      height: 1.3em;
      width: 1.3em;
      fill: white;
      flex-shrink: 0;
    }

    .input-field {
      background: none;
      border: none;
      outline: none;
      width: 100%;
      color: #d3d3d3;
      font-family: 'Poppins', sans-serif;
      font-size: 16px;
    }

    .form .btn {
      display: flex;
      justify-content: center;
      flex-direction: row;
      margin-top: 2em;
      margin-bottom: 1em;
    }

    .button1 {
      padding: 0.5em 1.5em;
      border-radius: 5px;
      border: none;
      outline: none;
      transition: .4s ease-in-out;
      background-color: #252525;
      color: white;
      cursor: pointer;
      font-family: 'Poppins', sans-serif;
      font-size: 1em;
    }

    .button1:hover {
      background-color: #64ffda;
      color: black;
    }

    .login-error {
      color: #ff6b6b;
      text-align: center;
      font-size: 0.85em;
      margin-top: 10px;
      display: none;
    }

    .login-error.show {
      display: block;
    }

    /* Main App */
    .main-app {
      display: none;
      min-height: 100vh;
      padding: 15px;
    }

    .main-app.visible {
      display: block;
    }

    /* Navigation Switch */
    .nav-container {
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 15px 0;
      gap: 0;
    }

    /* Settings Button in Home */
    .settings-btn-container {
      margin-top: 25px;
      margin-bottom: 20px;
      display: flex;
      justify-content: center;
    }

    .settings-open-btn {
      --main-focus: #333;
      --font-color: #dedede;
      --bg-color-sub: #1a1a1a;
      --bg-color: #2a2a2a;
      --main-color: #dedede;
      position: relative;
      width: 160px;
      height: 42px;
      cursor: pointer;
      display: flex;
      align-items: center;
      border: 2px solid var(--main-color);
      box-shadow: 4px 4px var(--main-color);
      background-color: var(--bg-color);
      border-radius: 10px;
      overflow: hidden;
      text-decoration: none;
    }

    .settings-open-btn, .settings-open-btn .button__icon, .settings-open-btn .button__text {
      transition: all 0.3s;
    }

    .settings-open-btn .button__text {
      transform: translateX(30px);
      color: var(--font-color);
      font-weight: 600;
      font-size: 13px;
    }

    .settings-open-btn .button__icon {
      position: absolute;
      transform: translateX(120px);
      height: 100%;
      width: 38px;
      background-color: var(--bg-color-sub);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .settings-open-btn .svg {
      width: 22px;
      fill: var(--main-color);
      transition: transform 0.4s ease;
    }

    .settings-open-btn:hover {
      background: var(--bg-color);
    }

    .settings-open-btn:hover .button__text {
      color: transparent;
    }

    .settings-open-btn:hover .button__icon {
      width: 158px;
      transform: translateX(0);
    }

    .settings-open-btn:hover .svg {
      transform: rotate(90deg);
    }

    .settings-open-btn:active {
      transform: translate(3px, 3px);
      box-shadow: 0px 0px var(--main-color);
    }

    .flip-switch-container {
      --card-width: 90px;
      --card-height: 100px;
      --switch-bg: rgba(255, 255, 255, 0.1);
      --switch-border-color: rgba(255, 255, 255, 0.2);
      --text-color: #ffffff;
      --inactive-text-color: rgba(255, 255, 255, 0.6);
      --icon-shadow-color: rgba(0, 0, 0, 0.3);
      --card-bg: linear-gradient(135deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1));
      --highlight-color: #64ffda;
      display: grid;
      place-content: center;
      font-family: "Poppins", sans-serif;
    }

    @media (min-width: 768px) {
      .flip-switch-container {
        --card-width: 110px;
        --card-height: 120px;
      }
    }

    .flip-switch {
      display: flex;
      position: relative;
      width: calc(var(--card-width) * 2);
      height: var(--card-height);
      background: var(--switch-bg);
      border-radius: 20px;
      border: 1px solid var(--switch-border-color);
      box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37), inset 0 4px 8px rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(12px);
      perspective: 1000px;
    }

    .flip-switch input[type="radio"] { display: none; }

    .flip-switch .switch-button {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 6px;
      cursor: pointer;
      z-index: 2;
      color: var(--inactive-text-color);
      transition: all 0.3s ease;
      position: relative;
    }

    .flip-switch .switch-button:hover { color: var(--text-color); }
    .flip-switch .switch-button:hover svg {
      transform: translateY(-3px);
      filter: drop-shadow(0 4px 6px var(--icon-shadow-color)) brightness(1.2);
    }

    .flip-switch .switch-button svg {
      transition: all 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
      filter: drop-shadow(0 2px 3px var(--icon-shadow-color));
      width: 22px;
      height: 22px;
    }

    .flip-switch .switch-button span { font-size: 12px; font-weight: 500; letter-spacing: 0.5px; }

    @media (min-width: 768px) {
      .flip-switch .switch-button svg {
        width: 24px;
        height: 24px;
      }
      .flip-switch .switch-button span { font-size: 14px; }
    }

    .flip-switch #switch-opt-1:checked ~ [for="switch-opt-1"],
    .flip-switch #switch-opt-2:checked ~ [for="switch-opt-2"] {
      color: var(--text-color);
      text-shadow: 0 0 8px rgba(100, 255, 218, 0.5);
    }

    .flip-switch .switch-card {
      position: absolute;
      top: 0;
      left: 0;
      width: var(--card-width);
      height: var(--card-height);
      z-index: 1;
      transform-style: preserve-3d;
    }

    .flip-switch .card-face {
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 20px;
      background: var(--card-bg);
      border: 1px solid rgba(255, 255, 255, 0.15);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2), inset 0 2px 4px rgba(255, 255, 255, 0.1);
      backface-visibility: hidden;
    }

    .flip-switch .card-back { transform: rotateY(180deg); }

    .flip-switch #switch-opt-2:checked ~ .switch-card {
      animation: flipRight 0.6s cubic-bezier(0.76, 0, 0.24, 1) forwards;
    }

    .flip-switch #switch-opt-1:checked ~ .switch-card {
      animation: flipLeft 0.6s cubic-bezier(0.76, 0, 0.24, 1) forwards;
    }

    @keyframes flipRight {
      0% { transform: translateX(0%) rotateY(0deg); }
      50% { transform: translateX(50%) rotateY(90deg) scale(1.05); }
      100% { transform: translateX(100%) rotateY(180deg) scale(1); }
    }

    @keyframes flipLeft {
      0% { transform: translateX(100%) rotateY(180deg); }
      50% { transform: translateX(50%) rotateY(90deg) scale(1.05); }
      100% { transform: translateX(0%) rotateY(0deg) scale(1); }
    }

    .flip-switch #switch-opt-1:checked ~ [for="switch-opt-1"]::after,
    .flip-switch #switch-opt-2:checked ~ [for="switch-opt-2"]::after {
      content: "";
      position: absolute;
      bottom: -5px;
      width: 30px;
      height: 3px;
      background: var(--highlight-color);
      border-radius: 2px;
      animation: glow 1.5s infinite alternate;
    }

    @keyframes glow {
      from { box-shadow: 0 0 5px var(--highlight-color); }
      to { box-shadow: 0 0 15px var(--highlight-color), 0 0 25px var(--highlight-color); }
    }

    /* Settings Modal */
    .settings-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.85);
      z-index: 500;
      align-items: center;
      justify-content: center;
      padding: 15px;
    }

    .settings-modal.visible {
      display: flex;
    }

    .settings-panel {
      background: #1a1a1a;
      border-radius: 12px;
      padding: 15px 20px;
      max-width: 300px;
      width: 100%;
      border: 2px solid #dedede;
      box-shadow: 4px 4px #dedede;
      max-height: 90vh;
      overflow-y: auto;
    }

    .settings-title {
      color: #fff;
      font-size: 1em;
      margin-bottom: 12px;
      text-align: center;
      font-weight: 600;
    }

    .setting-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 8px 0;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      gap: 10px;
    }

    .setting-item:last-child {
      border-bottom: none;
    }

    .setting-label {
      color: #fff;
      font-size: 0.8em;
    }

    .setting-desc {
      color: rgba(255,255,255,0.4);
      font-size: 0.6em;
      margin-top: 1px;
    }

    /* Toggle Switch */
    .switch {
      position: relative;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      width: 44px;
      height: 22px;
      flex-shrink: 0;
    }

    .toggle {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .slider {
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #333;
      transition: 0.4s;
      border-radius: 22px;
    }

    .slider:before {
      position: absolute;
      content: "";
      height: 16px;
      width: 16px;
      left: 3px;
      bottom: 3px;
      background-color: white;
      transition: 0.4s;
      border-radius: 50%;
    }

    .toggle:checked + .slider {
      background-color: #64ffda;
    }

    .toggle:checked + .slider:before {
      transform: translateX(22px);
    }

    .close-settings {
      margin-top: 12px;
      width: 100%;
      padding: 10px;
      background: #dedede;
      color: #000;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-weight: 600;
      font-size: 0.8em;
      font-family: 'Poppins', sans-serif;
      transition: all 0.3s;
    }

    .close-settings:hover {
      background: #fff;
    }

    /* Mode Switch for Premium */
    .mode-switch-container {
      display: none;
      margin-top: 20px;
      flex-direction: column;
      align-items: center;
      gap: 10px;
    }

    .mode-switch-container.visible {
      display: flex;
    }

    .mode-labels {
      display: flex;
      align-items: center;
      gap: 12px;
      color: #888;
      font-size: 0.85em;
    }

    .mode-labels span {
      transition: all 0.3s;
    }

    .mode-labels span.active {
      color: #fff;
      font-weight: 600;
    }

    .mode-switch {
      --input-focus: #666;
      --font-color: #323232;
      --font-color-sub: #666;
      --bg-color: #fff;
      --bg-color-alt: #666;
      --main-color: #888;
      position: relative;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 30px;
      width: 50px;
      height: 20px;
    }

    .mode-switch .toggle {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .mode-switch .slider {
      box-sizing: border-box;
      border-radius: 5px;
      border: 2px solid var(--main-color);
      box-shadow: 4px 4px var(--main-color);
      position: absolute;
      cursor: pointer;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-color: #333;
      transition: 0.3s;
    }

    .mode-switch .slider:before {
      box-sizing: border-box;
      position: absolute;
      content: "";
      height: 20px;
      width: 20px;
      border: 2px solid var(--main-color);
      border-radius: 5px;
      left: -2px;
      bottom: 2px;
      background-color: var(--bg-color);
      box-shadow: 0 3px 0 var(--main-color);
      transition: 0.3s;
    }

    .mode-switch .toggle:checked + .slider {
      background-color: #555;
    }

    .mode-switch .toggle:checked + .slider:before {
      transform: translateX(30px);
    }

    /* Upload Box - unified for both modes */
    .upload-box {
      width: 100%;
      max-width: 400px;
    }

    .upload-box-inner {
      cursor: pointer;
      background-color: #333;
      padding: 25px 30px;
      border-radius: 30px;
      border: 2px dashed #666;
      box-shadow: 0px 0px 200px -50px rgba(0, 0, 0, 0.5);
      transition: all 0.3s ease;
    }

    @media (min-width: 768px) {
      .upload-box-inner {
        padding: 30px 70px;
        border-radius: 40px;
      }
    }

    .upload-box-inner:hover {
      border-color: #64ffda;
      box-shadow: 0 0 30px rgba(100, 255, 218, 0.2);
    }

    .upload-box-inner:focus-within {
      border-color: #64ffda;
      box-shadow: 0 0 30px rgba(100, 255, 218, 0.2);
    }

    .upload-box-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 5px;
    }

    .upload-box-content svg {
      height: 40px;
      fill: #666;
      margin-bottom: 12px;
      transition: all 0.3s;
    }

    @media (min-width: 768px) {
      .upload-box-content svg {
        height: 50px;
        margin-bottom: 15px;
      }
    }

    .upload-box-inner:hover svg,
    .upload-box-inner:focus-within svg {
      fill: #64ffda;
    }

    .upload-box-content p {
      color: #eee;
      font-size: 0.85em;
      margin: 0;
      text-align: center;
    }

    @media (min-width: 768px) {
      .upload-box-content p {
        font-size: 0.95em;
      }
    }

    .upload-box-content input[type="file"] {
      display: none;
    }

    .browse-button {
      background-color: #666;
      padding: 5px 15px;
      border-radius: 10px;
      color: #eee;
      transition: all 0.3s;
      margin-top: 10px;
      font-size: 0.85em;
    }

    .browse-button:hover {
      background-color: #888;
      color: #fff;
    }

    /* Link input styling */
    .link-input-field {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-top: 15px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .link-input-field input {
      background: rgba(0, 0, 0, 0.3);
      border: none;
      border-radius: 25px;
      padding: 10px 15px;
      color: #fff;
      font-family: 'Roboto Mono', monospace;
      font-size: 0.75em;
      outline: none;
      width: 180px;
      text-align: center;
      box-shadow: inset 2px 5px 10px rgb(5, 5, 5);
    }

    @media (min-width: 768px) {
      .link-input-field input {
        width: 220px;
        font-size: 0.8em;
      }
    }

    .link-input-field input::placeholder {
      color: rgba(255, 255, 255, 0.4);
    }

    .link-submit-btn {
      background-color: #666;
      border: none;
      border-radius: 10px;
      padding: 8px 15px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
      color: #eee;
      font-size: 0.8em;
      font-family: 'Poppins', sans-serif;
    }

    .link-submit-btn:hover {
      background-color: #64ffda;
      color: #000;
    }

    /* Drag mode content */
    .drag-mode-content {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* Paste mode content */
    .paste-mode-content {
      display: none;
      flex-direction: column;
      align-items: center;
    }

    .paste-mode-content.active {
      display: flex;
    }

    .drag-mode-content.hidden {
      display: none;
    }

    /* Content Sections */
    .content-section {
      display: none;
      padding: 20px 10px;
    }

    @media (min-width: 768px) {
      .content-section {
        padding: 40px 20px;
      }
    }

    .content-section.active { display: flex; flex-direction: column; align-items: center; }

    /* Hidden file input form */
    .file-upload-form {
      display: none;
    }

    /* Processing Animation */
    .processing-container {
      display: none;
      width: fit-content;
      gap: 10px;
      flex-direction: column;
      align-items: center;
    }

    .processing-container.active { display: flex; }

    .folder {
      width: min-content;
      margin: auto;
      animation: float 2s infinite linear;
    }

    .folder .top {
      background-color: #FF8F56;
      width: 60px;
      height: 12px;
      border-top-right-radius: 10px;
    }

    .folder .bottom {
      background-color: #FFCE63;
      width: 100px;
      height: 70px;
      box-shadow: 5px 5px 0 0 #283149;
      border-top-right-radius: 8px;
    }

    .processing-container .title {
      font-size: 1em;
      color: #fff;
      text-align: center;
      margin-top: 15px;
    }

    @keyframes float {
      0% { transform: translatey(0px); }
      50% { transform: translatey(-25px); }
      100% { transform: translatey(0px); }
    }

    /* Profile Section */
    .profile-section {
      width: 100%;
      max-width: 800px;
    }

    .section-title {
      color: #fff;
      font-size: 1.2em;
      margin-bottom: 20px;
      text-align: center;
    }

    @media (min-width: 768px) {
      .section-title {
        font-size: 1.5em;
      }
    }

    .files-list {
      display: flex;
      flex-direction: column;
      gap: 15px;
      width: 100%;
    }

    .file-card {
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      border-radius: 15px;
      padding: 15px;
      backdrop-filter: blur(10px);
    }

    @media (min-width: 768px) {
      .file-card {
        padding: 20px;
      }
    }

    .file-header {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 15px;
    }

    @media (min-width: 600px) {
      .file-header {
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
      }
    }

    .file-name {
      color: #64ffda;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.9em;
      word-break: break-all;
    }

    .file-icon {
      width: 18px;
      height: 18px;
      flex-shrink: 0;
    }

    .file-actions {
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
    }

    /* Copy Button */
    .copy {
      --button-bg: #ffffff;
      --button-hover-bg: #464646;
      --button-text-color: #474747;
      --button-hover-text-color: #8bb9fe;
      --button-border-radius: 10px;
      --button-diameter: 36px;
      --button-outline-width: 1px;
      --button-outline-color: rgb(141, 141, 141);
      --tooltip-bg: #f4f3f3;
      --toolptip-border-radius: 4px;
      --tooltip-font-family: Menlo, Roboto Mono, monospace;
      --tooltip-font-size: 12px;
      --tootip-text-color: rgb(50, 50, 50);
      --tooltip-padding-x: 7px;
      --tooltip-padding-y: 7px;
      --tooltip-offset: 8px;
      box-sizing: border-box;
      width: var(--button-diameter);
      height: var(--button-diameter);
      border-radius: var(--button-border-radius);
      background-color: var(--button-bg);
      color: var(--button-text-color);
      border: none;
      cursor: pointer;
      position: relative;
      outline: none;
      flex-shrink: 0;
    }

    .copy .tooltip {
      position: absolute;
      opacity: 0;
      visibility: hidden;
      top: 0;
      left: 50%;
      transform: translateX(-50%);
      white-space: nowrap;
      font: var(--tooltip-font-size) var(--tooltip-font-family);
      color: var(--tootip-text-color);
      background: var(--tooltip-bg);
      padding: var(--tooltip-padding-y) var(--tooltip-padding-x);
      border-radius: var(--toolptip-border-radius);
      pointer-events: none;
      transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    }

    .copy .tooltip::before {
      content: attr(data-text-initial);
    }

    .copy .tooltip::after {
      content: "";
      position: absolute;
      bottom: calc(var(--tooltip-padding-y) / 2 * -1);
      width: var(--tooltip-padding-y);
      height: var(--tooltip-padding-y);
      background: inherit;
      left: 50%;
      transform: translateX(-50%) rotate(45deg);
      z-index: -999;
      pointer-events: none;
    }

    .copy svg {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .copy .checkmark {
      display: none;
    }

    .copy:hover .tooltip,
    .copy:focus:not(:focus-visible) .tooltip {
      opacity: 1;
      visibility: visible;
      top: calc((100% + var(--tooltip-offset)) * -1);
    }

    .copy:focus:not(:focus-visible) .tooltip::before {
      content: attr(data-text-end);
    }

    .copy:focus:not(:focus-visible) .clipboard {
      display: none;
    }

    .copy:focus:not(:focus-visible) .checkmark {
      display: block;
    }

    .copy:hover,
    .copy:focus {
      background-color: var(--button-hover-bg);
    }

    .copy:active {
      outline: var(--button-outline-width) solid var(--button-outline-color);
    }

    .copy:hover svg {
      color: var(--button-hover-text-color);
    }

    /* Delete Button */
    .delete-btn {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background-color: rgb(20, 20, 20);
      border: none;
      font-weight: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.164);
      cursor: pointer;
      transition-duration: .3s;
      overflow: hidden;
      position: relative;
      flex-shrink: 0;
    }

    .delete-btn .svgIcon {
      width: 12px;
      transition-duration: .3s;
    }

    .delete-btn .svgIcon path {
      fill: white;
    }

    .delete-btn:hover {
      width: 90px;
      border-radius: 50px;
      transition-duration: .3s;
      background-color: rgb(255, 69, 69);
      align-items: center;
    }

    .delete-btn:hover .svgIcon {
      width: 30px;
      transition-duration: .3s;
      transform: translateY(60%);
    }

    .delete-btn::before {
      position: absolute;
      top: -20px;
      content: "Delete";
      color: white;
      transition-duration: .3s;
      font-size: 2px;
    }

    .delete-btn:hover::before {
      font-size: 12px;
      opacity: 1;
      transform: translateY(30px);
      transition-duration: .3s;
    }

    /* Download Button */
    .download-btn {
      --main-focus: #2d8cf0;
      --font-color: #dedede;
      --bg-color-sub: #222;
      --bg-color: #323232;
      --main-color: #dedede;
      position: relative;
      width: 130px;
      height: 36px;
      cursor: pointer;
      display: flex;
      align-items: center;
      border: 2px solid var(--main-color);
      box-shadow: 3px 3px var(--main-color);
      background-color: var(--bg-color);
      border-radius: 8px;
      overflow: hidden;
      flex-shrink: 0;
    }

    @media (min-width: 768px) {
      .download-btn {
        width: 150px;
        height: 40px;
        box-shadow: 4px 4px var(--main-color);
        border-radius: 10px;
      }
    }

    .download-btn, .download-btn .button__icon, .download-btn .button__text {
      transition: all 0.3s;
    }

    .download-btn .button__text {
      transform: translateX(18px);
      color: var(--font-color);
      font-weight: 600;
      font-size: 12px;
    }

    @media (min-width: 768px) {
      .download-btn .button__text {
        transform: translateX(21px);
        font-size: 14px;
      }
    }

    .download-btn .button__icon {
      position: absolute;
      transform: translateX(92px);
      height: 100%;
      width: 36px;
      background-color: var(--bg-color-sub);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    @media (min-width: 768px) {
      .download-btn .button__icon {
        transform: translateX(109px);
        width: 39px;
      }
    }

    .download-btn .svg {
      width: 18px;
      fill: var(--main-color);
    }

    @media (min-width: 768px) {
      .download-btn .svg {
        width: 20px;
      }
    }

    .download-btn:hover {
      background: var(--bg-color);
    }

    .download-btn:hover .button__text {
      color: transparent;
    }

    .download-btn:hover .button__icon {
      width: 128px;
      transform: translateX(0);
    }

    @media (min-width: 768px) {
      .download-btn:hover .button__icon {
        width: 148px;
      }
    }

    .download-btn:active {
      transform: translate(3px, 3px);
      box-shadow: 0px 0px var(--main-color);
    }

    .code-block {
      background: #1a1a1a;
      border-radius: 10px;
      padding: 12px;
      font-family: 'Roboto Mono', monospace;
      color: #fff;
      overflow-x: auto;
      white-space: pre-wrap;
      word-break: break-all;
      font-size: 0.65em;
      line-height: 1.4;
      max-height: 300px;
      overflow-y: auto;
      text-align: left;
    }

    @media (min-width: 768px) {
      .code-block {
        padding: 15px;
        font-size: 0.7em;
        max-height: 400px;
      }
    }

    .code-comment {
      color: #6a9955;
    }

    .no-files {
      color: rgba(255, 255, 255, 0.5);
      text-align: center;
      padding: 30px 20px;
      font-size: 0.9em;
    }

    .file-date {
      color: rgba(255,255,255,0.4);
      margin-top: 10px;
      display: block;
      font-size: 0.8em;
    }

    /* Premium Card */
    .premium-card {
      background: linear-gradient(135deg, #5865F2 0%, #7289da 100%);
      border-radius: 20px;
      padding: 25px 20px;
      margin-top: 30px;
      text-align: center;
      width: 100%;
      max-width: 400px;
    }

    .premium-card h3 {
      color: #fff;
      margin-bottom: 12px;
      font-size: 1.1em;
    }

    .premium-card p {
      color: rgba(255, 255, 255, 0.8);
      margin-bottom: 20px;
      font-size: 0.85em;
      line-height: 1.5;
    }

    @media (min-width: 768px) {
      .premium-card {
        padding: 30px;
      }
      .premium-card h3 {
        font-size: 1.3em;
      }
      .premium-card p {
        font-size: 0.95em;
      }
    }

    /* Discord Join Button */
    .discord-join-btn {
      --main-focus: #5865F2;
      --font-color: #fff;
      --bg-color-sub: #4752C4;
      --bg-color: #5865F2;
      --main-color: #fff;
      position: relative;
      width: 160px;
      height: 42px;
      cursor: pointer;
      display: flex;
      align-items: center;
      border: 2px solid var(--main-color);
      box-shadow: 4px 4px var(--main-color);
      background-color: var(--bg-color);
      border-radius: 10px;
      overflow: hidden;
      text-decoration: none;
    }

    .discord-join-btn, .discord-join-btn .button__icon, .discord-join-btn .button__text {
      transition: all 0.3s;
    }

    .discord-join-btn .button__text {
      transform: translateX(25px);
      color: var(--font-color);
      font-weight: 600;
      font-size: 13px;
    }

    .discord-join-btn .button__icon {
      position: absolute;
      transform: translateX(120px);
      height: 100%;
      width: 38px;
      background-color: var(--bg-color-sub);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .discord-join-btn .svg {
      width: 22px;
      fill: var(--main-color);
    }

    .discord-join-btn:hover {
      background: var(--bg-color);
    }

    .discord-join-btn:hover .button__text {
      color: transparent;
    }

    .discord-join-btn:hover .button__icon {
      width: 158px;
      transform: translateX(0);
    }

    .discord-join-btn:active {
      transform: translate(3px, 3px);
      box-shadow: 0px 0px var(--main-color);
    }

    /* Premium Buttons Container */
    .premium-buttons {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      gap: 15px;
    }

    @media (min-width: 500px) {
      .premium-buttons {
        flex-direction: row;
        gap: 20px;
      }
    }

    /* Admin Premium Button */
    .admin-premium-btn {
      --main-focus: #333;
      --font-color: #fff;
      --bg-color-sub: #1a1a1a;
      --bg-color: #2a2a2a;
      --main-color: #64ffda;
      position: relative;
      width: 160px;
      height: 42px;
      cursor: pointer;
      display: none;
      align-items: center;
      border: 2px solid var(--main-color);
      box-shadow: 4px 4px var(--main-color);
      background-color: var(--bg-color);
      border-radius: 10px;
      overflow: hidden;
    }

    .admin-premium-btn.visible {
      display: inline-flex;
    }

    .admin-premium-btn, .admin-premium-btn .button__icon, .admin-premium-btn .button__text {
      transition: all 0.3s;
    }

    .admin-premium-btn .button__text {
      transform: translateX(18px);
      color: var(--font-color);
      font-weight: 600;
      font-size: 13px;
    }

    .admin-premium-btn .button__icon {
      position: absolute;
      transform: translateX(120px);
      height: 100%;
      width: 38px;
      background-color: var(--bg-color-sub);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .admin-premium-btn .svg {
      width: 22px;
      fill: var(--main-color);
    }

    .admin-premium-btn:hover {
      background: var(--bg-color);
    }

    .admin-premium-btn:hover .button__text {
      color: transparent;
    }

    .admin-premium-btn:hover .button__icon {
      width: 158px;
      transform: translateX(0);
    }

    .admin-premium-btn:active {
      transform: translate(3px, 3px);
      box-shadow: 0px 0px var(--main-color);
    }

    /* Toast Notification */
    .toast {
      position: fixed;
      bottom: 30px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: #64ffda;
      color: #000;
      padding: 12px 25px;
      border-radius: 10px;
      font-weight: 500;
      transition: transform 0.3s ease;
      z-index: 1000;
      font-size: 0.9em;
      text-align: center;
      max-width: 90%;
    }

    .toast.show {
      transform: translateX(-50%) translateY(0);
    }

  </style>
</head>
<body>
  <!-- Loading Screen -->
  <div class="loading-screen" id="loadingScreen">
    <div class="progress-loader">
      <div class="progress"></div>
    </div>
  </div>

  <!-- Login Container -->
  <div class="login-container" id="loginContainer">
    <form class="form" id="loginForm">
      <p id="heading">Illusion Hub Deobfuscator</p>
      <div class="field">
        <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
          <path d="M13.106 7.222c0-2.967-2.249-5.032-5.482-5.032-3.35 0-5.646 2.318-5.646 5.702 0 3.493 2.235 5.708 5.762 5.708.862 0 1.689-.123 2.304-.335v-.862c-.43.199-1.354.328-2.29.328-2.926 0-4.813-1.88-4.813-4.798 0-2.844 1.921-4.881 4.594-4.881 2.735 0 4.608 1.688 4.608 4.156 0 1.682-.554 2.769-1.416 2.769-.492 0-.772-.28-.772-.76V5.206H8.923v.834h-.11c-.266-.595-.881-.964-1.6-.964-1.4 0-2.378 1.162-2.378 2.823 0 1.737.957 2.906 2.379 2.906.8 0 1.415-.39 1.709-1.087h.11c.081.67.703 1.148 1.503 1.148 1.572 0 2.57-1.415 2.57-3.643zm-7.177.704c0-1.197.54-1.907 1.456-1.907.93 0 1.524.738 1.524 1.907S8.308 9.84 7.371 9.84c-.895 0-1.442-.725-1.442-1.914z"></path>
        </svg>
        <input autocomplete="off" placeholder="Username" class="input-field" type="text" id="username">
      </div>
      <div class="field">
        <svg class="input-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
          <path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"></path>
        </svg>
        <input placeholder="Password" class="input-field" type="password" id="password">
      </div>
      <div class="login-error" id="loginError">Invalid username or password</div>
      <div class="btn">
        <button type="submit" class="button1">Login</button>
      </div>
    </form>
  </div>

  <!-- Main App -->
  <div class="main-app" id="mainApp">
    <!-- Navigation -->
    <div class="nav-container">
      <div class="flip-switch-container">
        <div class="flip-switch">
          <input type="radio" id="switch-opt-1" name="flip-switch" checked />
          <input type="radio" id="switch-opt-2" name="flip-switch" />

          <label for="switch-opt-1" class="switch-button">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
              <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8h5z"></path>
            </svg>
            <span>Home</span>
          </label>

          <label for="switch-opt-2" class="switch-button">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
              <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"></path>
            </svg>
            <span>Profile</span>
          </label>

          <div class="switch-card">
            <div class="card-face card-front"></div>
            <div class="card-face card-back"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Home Section -->
    <div class="content-section active" id="homeSection">
      <!-- Unified Upload Box -->
      <div class="upload-box" id="uploadBox">
        <div class="upload-box-inner" id="uploadBoxInner">
          <!-- Drag Mode (default) -->
          <div class="upload-box-content drag-mode-content" id="dragModeContent">
            <svg viewBox="0 0 640 512">
              <path d="M144 480C64.5 480 0 415.5 0 336c0-62.8 40.2-116.2 96.2-135.9c-.1-2.7-.2-5.4-.2-8.1c0-88.4 71.6-160 160-160c59.3 0 111 32.2 138.7 80.2C409.9 102 428.3 96 448 96c53 0 96 43 96 96c0 12.2-2.3 23.8-6.4 34.6C596 238.4 640 290.1 640 352c0 70.7-57.3 128-128 128H144zm79-217c-9.4 9.4-9.4 24.6 0 33.9s24.6 9.4 33.9 0l39-39V392c0 13.3 10.7 24 24 24s24-10.7 24-24V257.9l39 39c9.4 9.4 24.6 9.4 33.9 0s9.4-24.6 0-33.9l-80-80c-9.4-9.4-24.6-9.4-33.9 0l-80 80z"></path>
            </svg>
            <p>Drag and Drop</p>
            <p>or</p>
            <span class="browse-button">Browse file</span>
            <input id="file" type="file" />
          </div>
          
          <!-- Paste Mode (for premium) -->
          <div class="upload-box-content paste-mode-content" id="pasteModeContent">
            <svg viewBox="0 0 24 24">
              <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
            </svg>
            <p>Paste Script Link</p>
            <div class="link-input-field">
              <input type="text" id="linkInput" placeholder="https://..." />
              <button type="button" class="link-submit-btn" onclick="submitLink()">Deobfuscate</button>
            </div>
          </div>
        </div>
      </div>

      <!-- Mode Switch (Premium only) -->
      <div class="mode-switch-container" id="modeSwitchContainer">
        <div class="mode-labels">
          <span id="dragLabel" class="active">Drag</span>
          <label class="mode-switch">
            <input class="toggle" type="checkbox" id="modeToggle" onchange="toggleMode()">
            <span class="slider"></span>
          </label>
          <span id="pasteLabel">Paste</span>
        </div>
      </div>

      <!-- Settings Button -->
      <div class="settings-btn-container" id="settingsBtnHome">
        <button class="settings-open-btn" onclick="openSettings()">
          <span class="button__text">Settings</span>
          <span class="button__icon">
            <svg class="svg" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24">
              <path d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm70-80h79l14-106q31-8 57.5-23.5T639-327l99 41 39-68-86-65q5-14 7-29.5t2-31.5q0-16-2-31.5t-7-29.5l86-65-39-68-99 42q-22-23-48.5-38.5T533-694l-13-106h-79l-14 106q-31 8-57.5 23.5T321-633l-99-41-39 68 86 64q-5 15-7 30t-2 32q0 16 2 31t7 30l-86 65 39 68 99-42q22 23 48.5 38.5T427-266l13 106Zm42-180q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Zm-2-140Z"></path>
            </svg>
          </span>
        </button>
      </div>

      <!-- File Upload Form (hidden, used for file input) -->
      <form class="file-upload-form" id="uploadForm" style="display: none;">
        <input id="fileHidden" type="file" />
      </form>

      <!-- Processing Animation -->
      <div class="processing-container" id="processingContainer">
        <div class="folder">
          <div class="top"></div>
          <div class="bottom"></div>
        </div>
        <div class="title">Deobfuscation in progress...</div>
      </div>
    </div>

    <!-- Profile Section -->
    <div class="content-section" id="profileSection">
      <div class="profile-section">
        <h2 class="section-title">Deobfuscated Files</h2>
        <div class="files-list" id="filesList">
          <div class="no-files" id="noFiles">No deobfuscated files yet. Upload a file from Home!</div>
        </div>

        <!-- Premium Card -->
        <div class="premium-card">
          <h3>Read Links Directly?</h3>
          <p>Upgrade to Premium to deobfuscate links directly without uploading files!</p>
          <div class="premium-buttons">
            <a href="https://discord.gg/BA78HDbU" target="_blank" class="discord-join-btn">
              <span class="button__text">Join Discord</span>
              <span class="button__icon">
                <svg class="svg" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/>
                </svg>
              </span>
            </a>
            <div class="admin-premium-btn" id="adminPremiumBtn">
              <span class="button__text">Admin Premium</span>
              <span class="button__icon">
                <svg class="svg" viewBox="0 0 24 24" fill="currentColor">
                  <path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/>
                </svg>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div class="settings-modal" id="settingsModal">
    <div class="settings-panel">
      <h2 class="settings-title">Deobfuscator Settings</h2>
      
      <div class="setting-item">
        <div>
          <div class="setting-label">Lua Deobfuscator</div>
          <div class="setting-desc">Standard Lua bytecode deobfuscation</div>
        </div>
        <label class="switch">
          <input class="toggle" type="checkbox" id="settingLua" checked />
          <span class="slider"></span>
        </label>
      </div>

      <div class="setting-item">
        <div>
          <div class="setting-label">Luraph</div>
          <div class="setting-desc">Luraph obfuscator support</div>
        </div>
        <label class="switch">
          <input class="toggle" type="checkbox" id="settingLuraph" checked />
          <span class="slider"></span>
        </label>
      </div>

      <div class="setting-item">
        <div>
          <div class="setting-label">Moonsec</div>
          <div class="setting-desc">Moonsec v3 deobfuscation</div>
        </div>
        <label class="switch">
          <input class="toggle" type="checkbox" id="settingMoonsec" checked />
          <span class="slider"></span>
        </label>
      </div>

      <div class="setting-item">
        <div>
          <div class="setting-label">IronBrew</div>
          <div class="setting-desc">IronBrew 2 obfuscator support</div>
        </div>
        <label class="switch">
          <input class="toggle" type="checkbox" id="settingIronbrew" />
          <span class="slider"></span>
        </label>
      </div>

      <div class="setting-item">
        <div>
          <div class="setting-label">PSU</div>
          <div class="setting-desc">PSU obfuscator deobfuscation</div>
        </div>
        <label class="switch">
          <input class="toggle" type="checkbox" id="settingPSU" />
          <span class="slider"></span>
        </label>
      </div>

      <div class="setting-item">
        <div>
          <div class="setting-label">Beautify Output</div>
          <div class="setting-desc">Format and indent output code</div>
        </div>
        <label class="switch">
          <input class="toggle" type="checkbox" id="settingBeautify" checked />
          <span class="slider"></span>
        </label>
      </div>

      <button class="close-settings" onclick="closeSettings()">Save Settings</button>
    </div>
  </div>

  <!-- Toast -->
  <div class="toast" id="toast">Copied to clipboard!</div>

  <script>
    // User credentials - Updated to 9090/9090
    const users = {
      '9090': { password: '9090', premium: true }
    };

    let currentUser = null;
    let deobfuscatedFiles = [];

    // Load saved data from localStorage
    function loadSavedData() {
      const savedUser = localStorage.getItem('illusionUser');
      const savedFiles = localStorage.getItem('illusionFiles');
      
      if (savedFiles) {
        try {
          deobfuscatedFiles = JSON.parse(savedFiles);
        } catch(e) {
          deobfuscatedFiles = [];
        }
      }
      
      if (savedUser) {
        try {
          const userData = JSON.parse(savedUser);
          if (users[userData.name] && users[userData.name].password === userData.password) {
            currentUser = { name: userData.name, premium: users[userData.name].premium };
            return true;
          }
        } catch(e) {}
      }
      return false;
    }

    // Save user to localStorage
    function saveUser(username, password) {
      localStorage.setItem('illusionUser', JSON.stringify({ name: username, password: password }));
    }

    // Save files to localStorage
    function saveFiles() {
      localStorage.setItem('illusionFiles', JSON.stringify(deobfuscatedFiles));
    }

    // Clear saved user
    function clearSavedUser() {
      localStorage.removeItem('illusionUser');
    }

    // Loading screen and auto-login
    setTimeout(() => {
      document.getElementById('loadingScreen').classList.add('hidden');
      
      // Check for saved login
      if (loadSavedData()) {
        // Auto login
        document.getElementById('mainApp').classList.add('visible');
        
        if (currentUser.premium) {
          document.getElementById('modeSwitchContainer').classList.add('visible');
        }
      } else {
        document.getElementById('loginContainer').classList.add('visible');
      }
    }, 2500);

    // Login handling
    document.getElementById('loginForm').addEventListener('submit', (e) => {
      e.preventDefault();
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;
      
      if (users[username] && users[username].password === password) {
        currentUser = { name: username, premium: users[username].premium };
        
        // Save login for auto-authentication
        saveUser(username, password);
        
        document.getElementById('loginContainer').classList.remove('visible');
        document.getElementById('mainApp').classList.add('visible');
        
        if (currentUser.premium) {
          // Show mode switch for premium users
          document.getElementById('modeSwitchContainer').classList.add('visible');
        }
        
        document.getElementById('loginError').classList.remove('show');
      } else {
        document.getElementById('loginError').classList.add('show');
      }
    });

    // Mode toggle function
    function toggleMode() {
      const toggle = document.getElementById('modeToggle');
      const dragContent = document.getElementById('dragModeContent');
      const pasteContent = document.getElementById('pasteModeContent');
      const dragLabel = document.getElementById('dragLabel');
      const pasteLabel = document.getElementById('pasteLabel');

      if (toggle.checked) {
        // Paste mode
        dragContent.classList.add('hidden');
        pasteContent.classList.add('active');
        dragLabel.classList.remove('active');
        pasteLabel.classList.add('active');
      } else {
        // Drag mode
        dragContent.classList.remove('hidden');
        pasteContent.classList.remove('active');
        dragLabel.classList.add('active');
        pasteLabel.classList.remove('active');
      }
    }

    // Submit link for premium users
    function submitLink() {
      const linkInput = document.getElementById('linkInput');
      const link = linkInput.value.trim();
      
      if (!link) {
        showToast('Please enter a valid link');
        return;
      }

      if (!currentUser || !currentUser.premium) {
        showToast('Premium required for link deobfuscation');
        return;
      }

      // Extract filename from link or use default
      let fileName = 'script_from_link.lua';
      try {
        const url = new URL(link);
        const pathParts = url.pathname.split('/');
        const lastPart = pathParts[pathParts.length - 1];
        if (lastPart && lastPart.includes('.')) {
          fileName = lastPart;
        }
      } catch (e) {
        fileName = 'linked_script.lua';
      }

      const content = `-- Content from: ${link}\n-- Unable to fetch remote content in browser\n-- Link saved: ${link}`;
      
      linkInput.value = '';
      
      startDeobfuscation(fileName, content);
    }

    // Handle Enter key in link input
    document.getElementById('linkInput').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        submitLink();
      }
    });

    // Settings
    function openSettings() {
      document.getElementById('settingsModal').classList.add('visible');
    }

    function closeSettings() {
      document.getElementById('settingsModal').classList.remove('visible');
      showToast('Settings saved!');
    }

    // Navigation switch
    const switchOpt1 = document.getElementById('switch-opt-1');
    const switchOpt2 = document.getElementById('switch-opt-2');
    const homeSection = document.getElementById('homeSection');
    const profileSection = document.getElementById('profileSection');

    switchOpt1.addEventListener('change', () => {
      homeSection.classList.add('active');
      profileSection.classList.remove('active');
    });

    switchOpt2.addEventListener('change', () => {
      profileSection.classList.add('active');
      homeSection.classList.remove('active');
      renderFiles();
    });

    // File upload handling
    const fileInput = document.getElementById('file');
    const processingContainer = document.getElementById('processingContainer');

    fileInput.addEventListener('change', (e) => {
      if (e.target.files.length > 0) {
        const file = e.target.files[0];
        
        // Read actual file content
        const reader = new FileReader();
        reader.onload = function(event) {
          let content = event.target.result;
          
          // Check if content is valid
          if (!content || content.trim() === '') {
            content = '-- Empty file or unable to read content\n-- File: ' + file.name;
          }
          
          startDeobfuscation(file.name, content);
        };
        reader.onerror = function(error) {
          showToast('Error reading file');
        };
        reader.readAsText(file, 'UTF-8');
      }
    });

    // Make the drag content clickable
    document.getElementById('dragModeContent').addEventListener('click', () => {
      document.getElementById('file').click();
    });

    function startDeobfuscation(fileName, content) {
      document.getElementById('uploadBox').style.display = 'none';
      document.getElementById('modeSwitchContainer').style.display = 'none';
      document.getElementById('settingsBtnHome').style.display = 'none';
      processingContainer.classList.add('active');

      // Use the actual content provided, or fallback to empty
      let fileContent = content;
      if (!fileContent || fileContent.trim() === '') {
        fileContent = '-- No content available\n-- File: ' + fileName;
      }

      // Simple 10 second wait with just the animation
      setTimeout(() => {
        // Add header comment to content
        const finalContent = '--[[\n  Deobfuscated by Illusion Hub\n  Made by Illusion Dev\n]]--\n\n' + fileContent;
        
        // Save the actual file content
        deobfuscatedFiles.push({
          name: fileName,
          code: finalContent,
          date: new Date().toLocaleString()
        });
        
        // Save to localStorage
        saveFiles();

        processingContainer.classList.remove('active');
        document.getElementById('uploadBox').style.display = 'block';
        document.getElementById('settingsBtnHome').style.display = 'flex';
        
        // Restore mode switch for premium users
        if (currentUser && currentUser.premium) {
          document.getElementById('modeSwitchContainer').style.display = 'flex';
        }
        
        fileInput.value = '';
        document.getElementById('linkInput').value = '';

        showToast('Deobfuscation complete! Check Profile.');
        
        setTimeout(() => {
          switchOpt2.checked = true;
          homeSection.classList.remove('active');
          profileSection.classList.add('active');
          renderFiles();
        }, 1500);
      }, 10000);
    }

    function escapeHtml(text) {
      const div = document.createElement('div');
      div.textContent = text;
      return div.innerHTML;
    }

    // Delete file function - globally accessible
    window.deleteFile = function(index) {
      if (index >= 0 && index < deobfuscatedFiles.length) {
        deobfuscatedFiles.splice(index, 1);
        saveFiles();
        renderFiles();
        showToast('File deleted!');
      } else {
        showToast('Error: Invalid file index');
      }
    };

    // Copy code function - globally accessible
    window.copyCode = function(index) {
      if (index >= 0 && index < deobfuscatedFiles.length) {
        const code = deobfuscatedFiles[index].code;
        navigator.clipboard.writeText(code).then(() => {
          showToast('Copied to clipboard!');
        }).catch(() => {
          showToast('Error copying to clipboard');
        });
      }
    };

    // Download code function - globally accessible
    window.downloadCode = function(index) {
      if (index < 0 || index >= deobfuscatedFiles.length) {
        showToast('Error: File not found');
        return;
      }
      
      const file = deobfuscatedFiles[index];
      const content = file.code || '';
      
      if (!content) {
        showToast('Error: No content to download');
        return;
      }
      
      // Clean filename
      let fileName = file.name || 'script.lua';
      if (!fileName.endsWith('.lua')) {
        fileName = fileName.replace(/\.[^/.]+$/, '') + '.lua';
      }
      fileName = 'deobfuscated_' + fileName;
      
      // Create blob and download
      const blob = new Blob([content], { type: 'text/plain' });
      const url = URL.createObjectURL(blob);
      
      const link = document.createElement('a');
      link.href = url;
      link.download = fileName;
      link.style.display = 'none';
      
      document.body.appendChild(link);
      link.click();
      document.body.removeChild(link);
      
      URL.revokeObjectURL(url);
      showToast('File downloaded!');
    };

    function renderFiles() {
      const filesList = document.getElementById('filesList');
      const noFiles = document.getElementById('noFiles');
      const adminPremiumBtn = document.getElementById('adminPremiumBtn');

      // Show Admin Premium button only for premium users
      if (currentUser && currentUser.premium) {
        adminPremiumBtn.classList.add('visible');
      } else {
        adminPremiumBtn.classList.remove('visible');
      }

      if (deobfuscatedFiles.length === 0) {
        noFiles.style.display = 'block';
        filesList.innerHTML = '<div class="no-files">No deobfuscated files yet. Upload a file from Home!</div>';
        return;
      }

      noFiles.style.display = 'none';
      filesList.innerHTML = '';
      
      deobfuscatedFiles.forEach((file, index) => {
        const fileCard = document.createElement('div');
        fileCard.className = 'file-card';
        fileCard.setAttribute('data-file-index', index);
        const codeContent = file.code;
        
        // Create file header
        const fileHeader = document.createElement('div');
        fileHeader.className = 'file-header';
        
        // File name
        const fileName = document.createElement('span');
        fileName.className = 'file-name';
        fileName.innerHTML = `
          <svg class="file-icon" viewBox="0 0 24 24" fill="#64ffda">
            <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/>
          </svg>
          ${escapeHtml(file.name)}
        `;
        
        // File actions container
        const fileActions = document.createElement('div');
        fileActions.className = 'file-actions';
        
        // Copy button
        const copyBtn = document.createElement('button');
        copyBtn.className = 'copy';
        copyBtn.innerHTML = `
          <span class="tooltip" data-text-initial="Copy to clipboard" data-text-end="Copied!"></span>
          <span>
            <svg class="clipboard" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 6.35 6.35">
              <g>
                <path d="M2.43.265c-.3 0-.548.236-.573.53h-.328a.74.74 0 0 0-.735.734v3.822a.74.74 0 0 0 .735.734H4.82a.74.74 0 0 0 .735-.734V1.529a.74.74 0 0 0-.735-.735h-.328a.58.58 0 0 0-.573-.53zm0 .529h1.49c.032 0 .049.017.049.049v.431c0 .032-.017.049-.049.049H2.43c-.032 0-.05-.017-.05-.049V.843c0-.032.018-.05.05-.05zm-.901.53h.328c.026.292.274.528.573.528h1.49a.58.58 0 0 0 .573-.529h.328a.2.2 0 0 1 .206.206v3.822a.2.2 0 0 1-.206.205H1.53a.2.2 0 0 1-.206-.205V1.529a.2.2 0 0 1 .206-.206z" fill="currentColor"></path>
              </g>
            </svg>
            <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24">
              <g>
                <path d="M9.707 19.121a.997.997 0 0 1-1.414 0l-5.646-5.647a1.5 1.5 0 0 1 0-2.121l.707-.707a1.5 1.5 0 0 1 2.121 0L9 14.171l9.525-9.525a1.5 1.5 0 0 1 2.121 0l.707.707a1.5 1.5 0 0 1 0 2.121z" fill="currentColor"></path>
              </g>
            </svg>
          </span>
        `;
        copyBtn.addEventListener('click', function() {
          window.copyCode(index);
        });
        
        // Delete button
        const deleteBtn = document.createElement('button');
        deleteBtn.className = 'delete-btn';
        deleteBtn.innerHTML = `<svg viewBox="0 0 448 512" class="svgIcon"><path d="M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"></path></svg>`;
        deleteBtn.addEventListener('click', function() {
          window.deleteFile(index);
        });
        
        // Download button
        const downloadBtn = document.createElement('button');
        downloadBtn.type = 'button';
        downloadBtn.className = 'download-btn';
        downloadBtn.innerHTML = `
          <span class="button__text">Download</span>
          <span class="button__icon">
            <svg class="svg" viewBox="0 0 35 35" xmlns="http://www.w3.org/2000/svg">
              <path d="M17.5,22.131a1.249,1.249,0,0,1-1.25-1.25V2.187a1.25,1.25,0,0,1,2.5,0V20.881A1.25,1.25,0,0,1,17.5,22.131Z"></path>
              <path d="M17.5,22.693a3.189,3.189,0,0,1-2.262-.936L8.487,15.006a1.249,1.249,0,0,1,1.767-1.767l6.751,6.751a.7.7,0,0,0,.99,0l6.751-6.751a1.25,1.25,0,0,1,1.768,1.767l-6.752,6.751A3.191,3.191,0,0,1,17.5,22.693Z"></path>
              <path d="M31.436,34.063H3.564A3.318,3.318,0,0,1,.25,30.749V22.011a1.25,1.25,0,0,1,2.5,0v8.738a.815.815,0,0,0,.814.814H31.436a.815.815,0,0,0,.814-.814V22.011a1.25,1.25,0,1,1,2.5,0v8.738A3.318,3.318,0,0,1,31.436,34.063Z"></path>
            </svg>
          </span>
        `;
        downloadBtn.addEventListener('click', function() {
          window.downloadCode(index);
        });
        
        // Assemble file actions
        fileActions.appendChild(copyBtn);
        fileActions.appendChild(deleteBtn);
        fileActions.appendChild(downloadBtn);
        
        // Assemble file header
        fileHeader.appendChild(fileName);
        fileHeader.appendChild(fileActions);
        
        // Code block
        const codeBlock = document.createElement('div');
        codeBlock.className = 'code-block';
        codeBlock.textContent = codeContent;
        
        // File date
        const fileDate = document.createElement('small');
        fileDate.className = 'file-date';
        fileDate.textContent = 'Processed: ' + file.date;
        
        // Assemble file card
        fileCard.appendChild(fileHeader);
        fileCard.appendChild(codeBlock);
        fileCard.appendChild(fileDate);
        
        filesList.appendChild(fileCard);
      });
    }

    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('show');
      setTimeout(() => {
        toast.classList.remove('show');
      }, 3000);
    }

    // Close settings modal on outside click
    document.getElementById('settingsModal').addEventListener('click', (e) => {
      if (e.target.id === 'settingsModal') {
        closeSettings();
      }
    });
  </script>
</body>
</html>
